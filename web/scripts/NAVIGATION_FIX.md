# Исправление проблемы с пропаданием переключателей при навигации

## Проблема
При переходе между страницами (например, с главной на другие) пропадают кнопки смены темы и языка.

## Исправления

### 1. Автоматическая реинициализация
- Добавлен вызов `initializeThemeAndLanguage()` в функцию `initialize()` в `core.js`
- Теперь переключатели пересоздаются при каждой навигации

### 2. Защита от дубликатов
- Функция `addThemeAndLanguageSwitchers()` проверяет существование переключателей
- Не создает дубликаты при повторных вызовах

### 3. DOM Observer (резерв)
- Добавлен `dom-observer.js` для автоматического восстановления
- Отслеживает изменения в DOM и восстанавливает переключатели если нужно

## Как проверить исправление

1. **Основная проверка:**
   - Загрузите главную страницу
   - Убедитесь что переключатели есть в header
   - Перейдите на другую страницу (Данные, Теги, Логи)
   - Переключатели должны остаться на месте

2. **Отладка (если нужно):**
   
   Раскомментируйте в `script.js`:
   ```javascript
   import './theme-debug.js';
   ```
   
   Затем в консоли браузера:
   ```javascript
   // проверка текущего состояния
   debugThemeAndTranslations();
   
   // тест восстановления
   testSwitcherRestoration();
   
   // ручное восстановление
   restoreSwitchers();
   ```

## Команды для экстренного восстановления

Если переключатели все еще пропадают:

```javascript
// в консоли браузера:

// ручная инициализация
window.initializeThemeAndLanguage();

// принудительное восстановление  
window.restoreSwitchers();

// полная реинициализация
manualInit();
```

## Техническая информация

### Что происходит при навигации:
1. `loadPage()` заменяет `document.body.innerHTML`
2. Вызывается `initialize()`
3. `initialize()` теперь вызывает `initializeThemeAndLanguage()`
4. Переключатели пересоздаются автоматически

### Дополнительная защита:
- DOM Observer следит за изменениями header
- Автоматически восстанавливает переключатели если они исчезли
- Работает как fallback механизм

Теперь переключатели должны корректно работать на всех страницах! 